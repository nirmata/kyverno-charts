{{- if and (eq .Values.enableWebhook true) (eq .Values.certManager "operator") }}
{{- $nsp := include "enterprise-kyverno.namespace" . }}
{{- if not (lookup "v1" "Secret" $nsp "webhook-server-cert") }}
apiVersion: v1
kind: Secret
metadata:
  name: webhook-server-cert
  {{- if .Values.globalAnnotations }}
  annotations: 
    {{- toYaml .Values.globalAnnotations| nindent 4 }}
  {{- end }}
  labels:
    {{- include "enterprise-kyverno.labels" . | nindent 4 }}
    {{- if .Values.globalLabels }}
    {{- toYaml .Values.globalLabels| nindent 4 }}
    {{- end }}
    "cert.security.nirmata.io/managed-by": "kyverno-operator"
    app: nirmata-kyverno-operator
type: kubernetes.io/tls
data:
  # Temporary keys, refreshed by operator container at startup
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUVwUUlCQUFLQ0FRRUFtRUtPTWUzanFEaEdMbjFZTGhQUkNRSlB4bVgrZkpwcm02UWQrRjFZNnhYc0o2dlAKZGRFUXVrdWN6WDMveTN4S1gwa1lnaVZXMk0wSnVLbUhGUWpmVEhndVl2N0Nna0UvUkhGTXk4MFZSSG51YmM5bwpDOUlEcGFZRkJrL1JYeFYrRE1SNHBLaCt4UnRNbjhCQmJGd2JSRitwTVhXNS9rSVhNUWZRZDhSeDBTMFNmcDd3CnZmMFJSMzZkd0lhNlpaMFBVRUdWQ2FqU1NmSXY3aEtqUVIrSFJYU1pNSEVhaXJrOE9TM3BhSmNRT013REkzb0QKQWVGa2NqSXNzOVBUaSt3ajAvY3h3VkJ5UjdHdGVqL3J1dVoxNStYWTMxazVnRjM4YjYzTW5DOXRmWUNCQmcvQwpEYkJYREZnbHFNeFVLa1pVVnhwOWdEdmRyN1NBcjdOWmlCeDc0UUlEQVFBQkFvSUJBRXZGKzR2L2pxZDk4ZmRhCjY5SnFqRUlHZzNzQjhVZERka0FMeWRwN1lqQUVSZlZzUEordWZydW51NDVNb1VzOFBLcjA3cHgrUnAwNFZSa3cKVFFoNzFOenlobXMveTc4VkI0NWhNRTNRYjBBWHlqK2QwM0xtZm1nbW1pT00vMjVwZk1TUDFsWmpnRXRKamJXRwo4VWdqQW5MaGhJc1h3b3MxaXVNY3QzT1RNTzFlMDJOVUFYV2lFdmNoRkZqR0dYNUtqSFB3NGtSYjl5eXVsb0ZECklrYlpPbGd1cFBsbFowVHdqYVpMTEthSDNsaWpONE5vTUhoTmZiRmFNZ2RwZGk2RzFseWpCOTczQlFTSEp0WHoKQ09VUjJTWGVjcndra2JINEcvQ1FTQzJteHJhWVNjWThNaUxPaXpZRGlzUGk3TytsQnNxV3lORGJBdzNhRnd2YwpYeENRbEZFQ2dZRUF5WnhYSFNGcDZIb0gvcEIzcnlGblpqQS80Y0JqVjdRb1QvaCtiaWtoMldCUnIxZDRiU2ExCktuQ0c0MWRYSEVMNlJwV0ZacVh2UXgzcjZHWnZiQk5UTVFWalJRL1JoQjBLalA5V2UxMk10VTF4aUJlSmF1SEUKSFM5UERIbDhuT3hRYUxXc3RSRXMxMkl6YXNEeTdDMEMzaDROUzc4YWJaMUY2eENsTVppU2cvVUNnWUVBd1ZYegpUUUJsYU91eXJBT3ZIQStBa3k3TXRZZDNXeUxuQm0zY3RLeUdOclhhYXVFZnFxb1NLWE0vU2k5Q3laZ3FxbzB3ClNmQnh0ZFlackR4cEgrMGFLMzFpRmhzQlEvNGxsdXBHMEVuTTVjMThIdWNDZllhWGtLMGFSczNOYmFZMU43TGEKejJUaTVhanh5bldWY1JzRkd0Q1BKRVc4U1ZocDhrZnBKOXVTMEwwQ2dZRUFtemJRM20xMkV2TzRLZVRoTDZSQQo3YXhoMGhTQ3B1ZmRUVXdiVWdZNnVCYnViRmFrTVN4bXQ0aXdZR0JDZ1ZDVFREb2EzTjhOS0JmbUlpS1N6NXJGCkptMW1jcW50L0k4N0t6ZjlSYmJNK0Z2cDl3TmYyVGg4K3BjTWZhY2VKOVhMUmdId04rcEVJb0hJNGZ3d1NXR1IKM3AwMlVVV01QQzJqd1lnc0ZkWEhudTBDZ1lFQXQvSWhCTGhGeENmTTNXQzc4TVRISGtJK3Z0QmV2VFZkL1gzMQpxV2trWVZWd3RKUHczeDNsSGM3cS9wZ3N3VVdvQXBGR3luS2NuZGRRb2REd2JGSFl2bHdUUU5qOHdVWkRXVzBaClp2OXdsWXlHZFpoeGhDRFVmL0JTdWQ4QmZ6dk9FbXAzU1MvQnVhU2VPSFRiZEx1eWhhcTlKbE83SzBXVnQ5QzMKZ3hha2Z6a0NnWUVBbDZiUWwrZlQ2U2dZRGZHQ1REbXJzaEhkSmhGZ2RacVJMcVhOL2pRU0JZNkFVQnlDb3lZOQpQNnZNMERvdlVLWGd5ekxVSUhEZ2dMRFRrRitHanJwbFUwRUpBWEZvN1B3cCsvTjRSS0sydmdYMk5PWTF6TU42CjRiOTd3MW52MTR4d2lYWVozbDhtSkVtNDFBdG9vbVZ2VFpEWUpoK0M0T2syN2dmL2pOOVA1SUk9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVFekNDQXZ1Z0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFzTVNvd0tBWURWUVFERENFcUxtVnUKZEdWeWNISnBjMlV0YTNsMlpYSnVieTF2Y0dWeVlYUnZjaTV6ZG1Nd0hoY05Nak13TmpFNU1UQTBNalV5V2hjTgpNak14TVRFMk1URTBNalV5V2pBbU1TUXdJZ1lEVlFRREV4dGxiblJsY25CeWFYTmxMV3Q1ZG1WeWJtOHRiM0JsCmNtRjBiM0l3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ1lRbzR4N2VPb09FWXUKZlZndUU5RUpBay9HWmY1OG1tdWJwQjM0WFZqckZld25xODkxMFJDNlM1ek5mZi9MZkVwZlNSaUNKVmJZelFtNApxWWNWQ045TWVDNWkvc0tDUVQ5RWNVekx6UlZFZWU1dHoyZ0wwZ09scGdVR1Q5RmZGWDRNeEhpa3FIN0ZHMHlmCndFRnNYQnRFWDZreGRibitRaGN4QjlCM3hISFJMUkorbnZDOS9SRkhmcDNBaHJwbG5ROVFRWlVKcU5KSjhpL3UKRXFOQkg0ZEZkSmt3Y1JxS3VUdzVMZWxvbHhBNHpBTWplZ01CNFdSeU1peXowOU9MN0NQVDl6SEJVSEpIc2ExNgpQK3U2NW5YbjVkamZXVG1BWGZ4dnJjeWNMMjE5Z0lFR0Q4SU5zRmNNV0NXb3pGUXFSbFJYR24yQU85MnZ0SUN2CnMxbUlISHZoQWdNQkFBR2pnZ0ZFTUlJQlFEQU9CZ05WSFE4QkFmOEVCQU1DQmFBd0V3WURWUjBsQkF3d0NnWUkKS3dZQkJRVUhBd0V3REFZRFZSMFRBUUgvQkFJd0FEQWZCZ05WSFNNRUdEQVdnQlJDTk1SSEhvb1hBVzlKd0lBRApybXFTamoyNm5UQ0I2UVlEVlIwUkJJSGhNSUhlZ2h0bGJuUmxjbkJ5YVhObExXdDVkbVZ5Ym04dGIzQmxjbUYwCmIzS0NOMlZ1ZEdWeWNISnBjMlV0YTNsMlpYSnVieTF2Y0dWeVlYUnZjaTVsYm5SbGNuQnlhWE5sTFd0NWRtVnkKYm04dGIzQmxjbUYwYjNLQ08yVnVkR1Z5Y0hKcGMyVXRhM2wyWlhKdWJ5MXZjR1Z5WVhSdmNpNWxiblJsY25CeQphWE5sTFd0NWRtVnlibTh0YjNCbGNtRjBiM0l1YzNaamdrbGxiblJsY25CeWFYTmxMV3Q1ZG1WeWJtOHRiM0JsCmNtRjBiM0l1Wlc1MFpYSndjbWx6WlMxcmVYWmxjbTV2TFc5d1pYSmhkRzl5TG5OMll5NWpiSFZ6ZEdWeUxteHYKWTJGc01BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ2tYSjJIUHJROXJJNzNpbEN5Zm0vaUU5c1VUTXRFNmJVSAp5TUdPbEEybjZnQm1xdS9rOGwzYVh4bVJpSVJtQTJwbm5URW5INUdmUi9WaXpDVzNkdHQ0WDJXbko2ckR5OFpiCnYwaXlkVVhHQXNEMG5KMnpwSWhweXIvM2gvOEM4ZFBwb3BjTWt0NDlYZEVmb0RYYjNGenhSR05CWDdoY2E4a3UKcHlYYTlCZHh4TXFjRjMyWnU1cHRsUVFETUx1MStORUp1d1IwckVvSVNmWUV2QjNkdjZDNkd6ZmFSRmNwRUhQdAp4ek0wejh5NEZzMDBxM2d1aG5wcHhqNzJZTHJEN0g0cUtZRlNsbmlyc1llWnp3Y1dpblJwY0p6ODFSYTBtZm5PCmRqbGxnOHJmSWpEYll4dWZLMVdGbnFjQm9GU0Zuclk3bkJSZVB4bjRUWEFWMUgvUXNDZ2MKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURGVENDQWYyZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFzTVNvd0tBWURWUVFERENFcUxtVnUKZEdWeWNISnBjMlV0YTNsMlpYSnVieTF2Y0dWeVlYUnZjaTV6ZG1Nd0hoY05Nak13TmpFNU1UQTBNalV5V2hjTgpNalF3TmpFNE1URTBNalV5V2pBc01Tb3dLQVlEVlFRRERDRXFMbVZ1ZEdWeWNISnBjMlV0YTNsMlpYSnVieTF2CmNHVnlZWFJ2Y2k1emRtTXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDMW1HT08KK3dCVHpMVnpqOVVKSU1nZkUwcm9URFJZaC81YlY2Q2tRQzV1dURvZTBxN2l2SFlCNytBVDVEQURueW1lVS9aVgo0U2pUbjR3cmdUOUoyRUtMM0NCSlRNWlVPUFlWUGc0Y0VOck5NR2lkalZ6Y3Z5S05MTXlzOENiRG84Tk5XRmo5CjJDbGRLV2xjbWFxbTZIL2RlNmFYbkhVaVpqTkIvaU5xVUVQOUU1eTRYWlFIVXJ5ck40Wm8vUWU2OXR1MnNIOFYKZGdNRGNFTzNJVHg4MVUwYTlzcC9xZjVXQmovM0dXL3IwVGI3dW1RRG5ZMlNoZkJaNTFtenpQZEZMOHFGL3hlNQpkRmRzV3RtY1hzOEtMUzFuYnZyaXFDMDRBcEpnVW03MExiTWoxNFhtKzNEd28wSmVDanhYQjBDK0VvcEx0V1dTCjlnU005WENZTVd2SzA1aFpBZ01CQUFHalFqQkFNQTRHQTFVZER3RUIvd1FFQXdJQ3BEQVBCZ05WSFJNQkFmOEUKQlRBREFRSC9NQjBHQTFVZERnUVdCQlJDTk1SSEhvb1hBVzlKd0lBRHJtcVNqajI2blRBTkJna3Foa2lHOXcwQgpBUXNGQUFPQ0FRRUFRVjR0eGVVNEx1MWpSeDZ0emZjWWxUc0RmNUtqYjdiU1BrS1N3bUdBK3JmOHJmYkYvbTB4ClVNVUFTcFdLZDFmMFExTVpJQyswazA3elBMZEsrOTZQd0JhTldZRkFRQlFzdkkySnBGTHlEcWx0VnJYaE91K0IKWW02bjJJUHhpcEVQVnlDd2dMSUVORit5ZmR6eVJNdEdLOThjYit3bzc2MW9DZTl3VTVrbUJCVUdxcFI4a2d6dgprSGREWXVOUkNkZjJyNW5DMGRVazMvWitndzNXb2phTzVxazk5N2ZhUHlkNFUvRlB6NEZhem9TT0luZTAwazJKCnBQWjRyRXYrSjM1dUFSYTIvODI5UFdLMEdERXl3aUZvSmJJcVhIYml5dWd6b044MTR2elVQYk9hc1E1RUtFYjQKRkJpZEtnckxHdlcwRWIvRHZ2dnRjbGVUR0tBQkV2RWRWUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
{{- end }}

{{- end }}
