replicaCount: 1

image:
  repository: ghcr.io/nirmata/go-agent-remediator
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""


resources:
  limits:
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Logging configuration
logging:
  # Set verbosity level (0=info, 1=audit+info, 2=debug+audit+info)
  verbosity: 0
  # Enable audit logging (if true, overrides verbosity=0 to ensure audit logs are visible)
  enableAudit: false

nodeSelector: {}
tolerations: []
affinity: {}

# LLM provider configuration for creating an LLMConfig CR
llm:
  enabled: true
  provider: nirmataAI  # Options: bedrock, azure-openai, nirmataAI
  bedrock:
    model: ""
    region: ""
    secretRef:
      name: ""
      # Optional for some auth methods
      key: "aws_access_key_id"
  azureOpenAI:
    endpoint: ""
    deploymentName: ""
    secretRef:
      name: ""
      # Defaults to standard header key
      key: "api-key"
  nirmataAI:
    endpoint: "https://nirmata.io"
    model: ""

nirmata:
  apiToken: ""
  apiTokenSecret: ""
  apiTokenSecretNamespace: "nirmata"

# ToolConfig for GitHub (used by CreatePR)
tool:
  enabled: true
  name: github-tool
  type: github

  # Authentication method configuration
  # Choose between "pat" (Personal Access Token) or "app" (GitHub App)
  credentials:
    method: pat  # Options: "pat" or "app" (recommended: "app" for better security)

    # app:
    #   appId: ""  # Set this to your GitHub App ID
    #   # installationId: ""  # Optional: set if you want to specify installation ID
    #   privateKeySecret:
    #     name: "github-app-private-key"
    #     key: "private-key.pem"

    # PAT configuration (used when method: pat)
    pat:
      secret:
        name: "github-token"
        key: "token"

  defaults:
    prBranchPrefix: remediation-
    prTitleTemplate: "[Auto-Remediation] Fix policy violations"
    commitMessageTemplate: "Auto-fix: Remediate policy violations"

# Remediator CR
remediator:
  enabled: true
  name: remediator-agent
  environment:
    localCluster: false
    argoCD:
      hub: true
  target:
    clusterNames: []
    clusterServerUrls: []
    argoAppSelector:
      allApps: true
  remediation:
    schedule: "0 */6 * * *"
    actions:
      - type: CreatePR
        toolRefName: github-tool
